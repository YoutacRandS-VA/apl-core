# Minimal values file with defaults
cluster:
  name: 'dev'
  k8sContext: CONTEXT_PLACEHOLDER
otomi:
  version: 'OTOMI_VERSION_PLACEHOLDER'
  adminPassword: welcomeotomi
apps:
  alertmanager:
    enabled: true
  cert-manager:
    issuer: custom-ca
  grafana:
    enabled: true
  jaeger:
    enabled: true
  kiali:
    enabled: true
  loki:
    enabled: true
    adminPassword: blablabla
  minio:
    enabled: true
  otel:
    enabled: true
  prometheus:
    enabled: true
  promtail:
    enabled: true
  tempo:
    enabled: true
  istio:
    tracing:
      enabled: true
      samplingRatio: '100'
  ingress-nginx-platform:
    tracing:
      enabled: true
      samplingRatio: '100'

teamConfig:
  demo:
    password: somesecretvalue
    id: demo
    selfService:
      service:
        - ingress
    managedMonitoring:
      grafana: true
      prometheus: true
      alertmanager: true
    networkPolicy:
      egressPublic: false
      ingressPrivate: false
    resources:
      alertmanager:
        requests:
          cpu: 100m
          memory: 64Mi
        limits:
          cpu: 200m
          memory: 256Mi
      grafana:
        requests:
          cpu: 10m
          memory: 128Mi
        limits:
          cpu: '1'
          memory: 1Gi
      grafanaSidecar:
        limits:
          cpu: 500m
          memory: 256Mi
        requests:
          cpu: 10m
          memory: 128Mi
      buildpacksTask:
        limits:
          cpu: '10'
          memory: 2Gi
        requests:
          cpu: 500m
          memory: 512Mi
      gitcloneTask:
        limits:
          cpu: '2'
          memory: 2Gi
        requests:
          cpu: 500m
          memory: 512Mi
      grypeTask:
        limits:
          cpu: '2'
          memory: 2Gi
        requests:
          cpu: 500m
          memory: 512Mi
      kanikoTask:
        limits:
          cpu: '2'
          memory: 2Gi
        requests:
          cpu: 500m
          memory: 512Mi
      tektonDashboard:
        limits:
          cpu: 101m
          memory: 128Mi
        requests:
          cpu: 10m
          memory: 64Mi
    services:
      - ingressClassName: platform
        ksvc:
          predeployed: false
        name: petclinic
        networkPolicy:
          ingressPrivate:
            mode: DenyAll
        ownHost: true
        port: 80
        type: public
    workloads:
      - name: petclinic
        path: otomi-deployment
        revision: b65583f614c800cb215b8418febbb42abbad5883
        selectedChart: custom
        url: https://github.com/linode/apl-charts
  admin:
    services: []
    workloads: []

files:
  env/teams/workloads/demo/petclinic.yaml: |
    values: |
      image:
          repository: springcommunity/spring-framework-petclinic
          tag: latest
      autoscaling:
          enabled: true
          minReplicas: 2
          maxReplicas: 3
      instrumentation:
          enabled: true
          language: java
      containerPorts:
        - name: http
          containerPort: 8080
          protocol: TCP
